<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
</html><!DOCTYPE html>
<html>
<head>
    <title>Super Bot T√†i X·ªâu v3 - Web</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-dark text-white">
<div class="container mt-4">

    <h1 class="text-center">üé≤ SUPER BOT T√ÄI X·ªàU v3 (WEB ONLINE)</h1>
    <hr>

    <div class="card p-3 bg-secondary">
        <label>S·ªë l∆∞·ª£t m√¥ ph·ªèng:</label>
        <input id="num_input" type="number" value="500000" class="form-control">
        <button onclick="runSimulation()" class="btn btn-warning mt-2">Ch·∫°y m√¥ ph·ªèng</button>
    </div>

    <h3 class="mt-4">üìä K·∫øt qu·∫£ th·ªëng k√™:</h3>
    <pre id="stats_box" class="text-info"></pre>

    <canvas id="resultChart" height="120"></canvas>
    <canvas id="totalChart" height="120" class="mt-4"></canvas>

</div>


<script>
async function runSimulation() {
    let n = document.getElementById("num_input").value;

    let res = await fetch("/simulate", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({n: n})
    });

    let data = await res.json();

    document.getElementById("stats_box").innerText =
        JSON.stringify(data.stats, null, 4);

    drawResultChart(data.stats);
    drawTotalChart(data.totals);
}

function drawResultChart(stats){
    new Chart(document.getElementById("resultChart"), {
        type: "bar",
        data: {
            labels: Object.keys(stats),
            datasets: [{
                label: "T·∫ßn su·∫•t",
                data: Object.values(stats),
                backgroundColor: ["blue","green","red"]
            }]
        }
    });
}

function drawTotalChart(totals){
    new Chart(document.getElementById("totalChart"), {
        type: "line",
        data: {
            labels: totals.map((_,i)=>i),
            datasets: [{
                label: "Bi·ªÉu ƒë·ªì t·ªïng ƒëi·ªÉm",
                data: totals,
                borderColor: "yellow"
            }]
        }
    });
}
</script>

</body>
</html>
